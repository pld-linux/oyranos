--- oyranos-0.9.5/src/modules/devices/oyranos_cmm_oyRE.cpp.orig	2014-03-07 09:43:25.000000000 +0100
+++ oyranos-0.9.5/src/modules/devices/oyranos_cmm_oyRE.cpp	2023-03-26 20:23:51.081151779 +0200
@@ -229,7 +229,7 @@ extern oyCMMapi8_s_ _api8;
 
 
 bool is_raw( int id );
-int DeviceFromContext(oyConfig_s **config, libraw_output_params_t *params);
+int DeviceFromContext(oyConfig_s **config, libraw_output_params_t *params, libraw_raw_unpack_params_t *rawparams);
 int DeviceFromHandle_opt(oyConfig_s *device, oyOption_s *option);
 
 /* --- implementations --- */
@@ -1079,7 +1079,7 @@ int Configs_Modify(oyConfigs_s * devices
             } else
               device_context = *(libraw_output_params_t**)oyOption_GetData(context_opt, NULL, allocateFunc);
 
-            DeviceFromContext(&device_new, device_context);
+            DeviceFromContext(&device_new, device_context, &rip.imgdata.rawparams);
             if(oyOptions_FindString( options, "icc_profile.fallback", 0 ))
               /* fallback: try to get color matrix to build a profile */
               p = createMatrixProfile( rip.imgdata.color,
@@ -1445,6 +1445,10 @@ oyCMMinfo_s_ _cmm_module = {
         error = oyOptions_SetFromInt( oyConfig_GetOptions(*config,"backend_core"), \
                                       CMM_BASE_REG OY_SLASH PRFX_LRAW #name, \
                                       params->name, 0, OY_CREATE_NEW );
+#define DFC_RAWOPT_ADD_INT(name) if(!error) \
+        error = oyOptions_SetFromInt( oyConfig_GetOptions(*config,"backend_core"), \
+                                      CMM_BASE_REG OY_SLASH PRFX_LRAW #name, \
+                                      rawparams->name, 0, OY_CREATE_NEW );
 #define DFC_OPT_ADD_FLOAT_ARR(name, i, n) if(!error) { \
 if (i==n-1) { \
    oyOption_s *opt = oyOption_FromRegistration(CMM_BASE_REG OY_SLASH PRFX_LRAW #name, 0);\
@@ -1459,7 +1463,7 @@ if (i==n-1) { \
         oyOption_SetFromDouble(opt, params->name, 0, 0); \
         oyOptions_MoveIn(*oyConfig_GetOptions(*config,"backend_core"), &opt, -1); \
 }
-int DeviceFromContext(oyConfig_s **config, libraw_output_params_t *params)
+int DeviceFromContext(oyConfig_s **config, libraw_output_params_t *params, libraw_raw_unpack_params_t *rawparams)
 {
    int error = 0;
 
@@ -1499,7 +1503,7 @@ int DeviceFromContext(oyConfig_s **confi
    DFC_OPT_ADD_INT_ARR(greybox,1) //4
    DFC_OPT_ADD_INT_ARR(greybox,2) //4
    DFC_OPT_ADD_INT_ARR(greybox,3) //4
-   DFC_OPT_ADD_INT(shot_select)
+   DFC_RAWOPT_ADD_INT(shot_select)
 
    return error;
 }
